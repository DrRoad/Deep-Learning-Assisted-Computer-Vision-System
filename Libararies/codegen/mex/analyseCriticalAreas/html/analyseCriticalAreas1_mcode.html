<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">chances</span>, <span class="var type1" id="S3T2U4">shrinks</span>] = analyseCriticalAreas(<span class="var type1" id="S4T3U7">img</span>, <span class="var type1" id="S5T4U8">edgeXs</span>, <span class="var type1" id="S6T4U9">edgeYs</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2">  2</a></span><span class="line"><span class="comment"><span class="comment">%{</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3">  3</a></span><span class="line"><span class="comment">---------------------------------------------------------------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4">  4</a></span><span class="line"><span class="comment"><span class="comment">%analyseCriticalAreas: Function used to check the 8 critical edses of the ROI so</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5">  5</a></span><span class="line"><span class="comment"><span class="comment">%as to decipher the kind of shape under question. Shapes such as such as</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6">  6</a></span><span class="line"><span class="comment"><span class="comment">%triangles, squares, octagons and diamonds</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7">  7</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8">  8</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9">  9</a></span><span class="line"><span class="comment"> Created on: 20th June, 2017</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10"> 10</a></span><span class="line"><span class="comment">   Author: Oluwole Oyetoke Jnr</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11"> 11</a></span><span class="line"><span class="comment">   Using MATLAB 2016</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12"> 12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13"> 13</a></span><span class="line"><span class="comment">STEPS</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14"> 14</a></span><span class="line"><span class="comment">1. Iterate through image and identify border elements</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15"> 15</a></span><span class="line"><span class="comment">2. Crop image based on active border pixels</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16"> 16</a></span><span class="line"><span class="comment">3. Perform edge detection on the croped image</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17"> 17</a></span><span class="line"><span class="comment">4. Check top/bottom-left, middle &amp; right corner for the presence of edges</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18"> 18</a></span><span class="line"><span class="comment">This will help in the detetion of triangls and rectangles</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19"> 19</a></span><span class="line"><span class="comment">---------------------------------------------------------------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20"> 20</a></span><span class="line"><span class="comment"><span class="comment">%}</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21"> 21</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22"> 22</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23"> 23</a></span><span class="line"><span class="comment">%Input Validation</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24"> 24</a></span><span class="line"><span class="keyword">if</span> nargin ~= 3</span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25"> 25</a></span><span class="line">    error(<span class="string">'analyseCriticalAreas:Input_Argument_Error'</span>,<span class="string">'This function works with 3 input argument -img, edgeXs, edgeYs- '</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26"> 26</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27"> 27</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28"> 28</a></span><span class="line"><span class="mxinfo " id="T5:U6"><span class="var type1" id="S9T5U23">regionFactor</span> = <span class="mxinfo " id="T5:U8">1/3</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29"> 29</a></span><span class="line"><span class="mxinfo " id="T5:U9"><span class="var type1" id="S10T5U29">ALLOWANCE</span> =<span class="mxinfo " id="T5:U11">3</span></span>; <span class="comment">%Allowance given when croping in the ROI at the end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30"> 30</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31"> 31</a></span><span class="line"><span class="mxinfo " id="T5:U12">[<span class="var type1" id="S11T5U34">xDim</span>, <span class="var type1" id="S12T5U35">yDim</span>, <span class="var type1" id="S13T5U36">zDim</span>] = size(<span class="var type1" id="S4T3U39">img</span>)</span>; <span class="comment">%Check if image is coloured</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32"> 32</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33"> 33</a></span><span class="line"><span class="comment">%Begin shrink process</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34"> 34</a></span><span class="line"><span class="mxinfo " id="T5:U17"><span class="var type1" id="S15T5U42">len</span> = <span class="mxinfo " id="T5:U19">length(<span class="var type1" id="S5T4U45">edgeXs</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35"> 35</a></span><span class="line"><span class="mxinfo " id="T5:U21"><span class="var type1" id="S17T5U48">highestX</span> = <span class="mxinfo " id="T5:U23">-<span class="mxinfo " id="T5:U24">1</span></span></span>; <span class="mxinfo " id="T5:U25"><span class="var type1" id="S18T5U53">highestY</span> = <span class="mxinfo " id="T5:U27">-<span class="mxinfo " id="T5:U28">1</span></span></span>; <span class="mxinfo " id="T5:U29"><span class="var type1" id="S19T5U58">lowestX</span> = <span class="mxinfo " id="T5:U31"><span class="var type1" id="S11T5U60">xDim</span>+<span class="mxinfo " id="T5:U33">1</span></span></span>; <span class="mxinfo " id="T5:U34"><span class="var type1" id="S20T5U64">lowestY</span> = <span class="mxinfo " id="T5:U36"><span class="var type1" id="S12T5U66">yDim</span>+<span class="mxinfo " id="T5:U38">1</span></span></span>; <span class="mxinfo " id="T5:U39"><span class="var type1" id="S21T5U70">currentX</span>=<span class="mxinfo " id="T5:U41">0</span></span>; <span class="mxinfo " id="T5:U42"><span class="var type1" id="S22T5U74">currentY</span>=<span class="mxinfo " id="T5:U44">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36"> 36</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S23T5U78">xLoop</span> = <span class="mxinfo " id="T5:U46">1</span>:<span class="var type1" id="S15T5U81">len</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37"> 37</a></span><span class="line">        <span class="mxinfo " id="T5:U48"><span class="var type1" id="S21T5U84">currentX</span> = <span class="mxinfo " id="T5:U50"><span class="var type1" id="S5T4U86">edgeXs</span>(<span class="var type1" id="S23T5U87">xLoop</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38"> 38</a></span><span class="line">        <span class="mxinfo " id="T5:U53"><span class="var type1" id="S22T5U90">currentY</span> = <span class="mxinfo " id="T5:U55"><span class="var type1" id="S6T4U92">edgeYs</span>(<span class="var type1" id="S23T5U93">xLoop</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39"> 39</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T6:U58"><span class="var type1" id="S21T5U97">currentX</span>&gt;<span class="var type1" id="S17T5U98">highestX</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40"> 40</a></span><span class="line">            <span class="mxinfo " id="T5:U61"><span class="var type1" id="S17T5U101">highestX</span>=<span class="var type1" id="S21T5U102">currentX</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,41" id="srcline41"> 41</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,42" id="srcline42"> 42</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T6:U64"><span class="var type1" id="S21T5U106">currentX</span>&lt;<span class="var type1" id="S19T5U107">lowestX</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,43" id="srcline43"> 43</a></span><span class="line">            <span class="mxinfo " id="T5:U67"><span class="var type1" id="S19T5U110">lowestX</span> = <span class="var type1" id="S21T5U111">currentX</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,44" id="srcline44"> 44</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,45" id="srcline45"> 45</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T6:U70"><span class="var type1" id="S22T5U115">currentY</span>&gt;<span class="var type1" id="S18T5U116">highestY</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,46" id="srcline46"> 46</a></span><span class="line">            <span class="mxinfo " id="T5:U73"><span class="var type1" id="S18T5U119">highestY</span>=<span class="var type1" id="S22T5U120">currentY</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,47" id="srcline47"> 47</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,48" id="srcline48"> 48</a></span><span class="line">         <span class="keyword">if</span> <span class="mxinfo " id="T6:U76"><span class="var type1" id="S22T5U124">currentY</span>&lt;<span class="var type1" id="S20T5U125">lowestY</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,49" id="srcline49"> 49</a></span><span class="line">            <span class="mxinfo " id="T5:U79"><span class="var type1" id="S20T5U128">lowestY</span> = <span class="var type1" id="S22T5U129">currentY</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50"> 50</a></span><span class="line">        <span class="keyword">end</span>    </span></span>
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51"> 51</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52"> 52</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53"> 53</a></span><span class="line"><span class="comment">%Give a little allowance</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54"> 54</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T6:U82"><span class="mxinfo " id="T5:U83"><span class="var type1" id="S19T5U134">lowestX</span>-<span class="var type1" id="S10T5U135">ALLOWANCE</span></span> &gt;=<span class="mxinfo " id="T5:U86">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55"> 55</a></span><span class="line">    <span class="mxinfo " id="T5:U87"><span class="var type1" id="S19T5U139">lowestX</span> = <span class="mxinfo " id="T5:U89"><span class="var type1" id="S19T5U141">lowestX</span>-<span class="var type1" id="S10T5U142">ALLOWANCE</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56"> 56</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57"> 57</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T6:U92"><span class="mxinfo " id="T5:U93"><span class="var type1" id="S20T5U147">lowestY</span>-<span class="var type1" id="S10T5U148">ALLOWANCE</span></span> &gt;=<span class="mxinfo " id="T5:U96">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58"> 58</a></span><span class="line">    <span class="mxinfo " id="T5:U97"><span class="var type1" id="S20T5U152">lowestY</span> = <span class="mxinfo " id="T5:U99"><span class="var type1" id="S20T5U154">lowestY</span>-<span class="var type1" id="S10T5U155">ALLOWANCE</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59"> 59</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60"> 60</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T6:U102"><span class="mxinfo " id="T5:U103"><span class="var type1" id="S17T5U160">highestX</span>+<span class="var type1" id="S10T5U161">ALLOWANCE</span></span> &lt;=<span class="var type1" id="S11T5U162">xDim</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61"> 61</a></span><span class="line">    <span class="mxinfo " id="T5:U107"><span class="var type1" id="S17T5U165">highestX</span> = <span class="mxinfo " id="T5:U109"><span class="var type1" id="S17T5U167">highestX</span>+<span class="var type1" id="S10T5U168">ALLOWANCE</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62"> 62</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63"> 63</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T6:U112"><span class="mxinfo " id="T5:U113"><span class="var type1" id="S18T5U173">highestY</span>+<span class="var type1" id="S10T5U174">ALLOWANCE</span></span> &lt;=<span class="var type1" id="S12T5U175">yDim</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64"> 64</a></span><span class="line">    <span class="mxinfo " id="T5:U117"><span class="var type1" id="S18T5U178">highestY</span> = <span class="mxinfo " id="T5:U119"><span class="var type1" id="S18T5U180">highestY</span>+<span class="var type1" id="S10T5U181">ALLOWANCE</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65"> 65</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66"> 66</a></span><span class="line"><span class="mxinfo " id="T5:U122"><span class="var type1" id="S24T5U184">width</span> = <span class="mxinfo " id="T5:U124"><span class="mxinfo " id="T5:U125"><span class="var type1" id="S18T5U187">highestY</span> - <span class="var type1" id="S20T5U188">lowestY</span></span> + <span class="mxinfo " id="T5:U128">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67"> 67</a></span><span class="line"><span class="mxinfo " id="T5:U129"><span class="var type1" id="S25T5U192">height</span> = <span class="mxinfo " id="T5:U131"><span class="mxinfo " id="T5:U132"><span class="var type1" id="S17T5U195">highestX</span> - <span class="var type1" id="S19T5U196">lowestX</span></span> + <span class="mxinfo " id="T5:U135">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68"> 68</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69"> 69</a></span><span class="line"><span class="mxinfo " id="T5:U136"><span class="var type1" id="S26T5U200">xShrink</span> = <span class="var type1" id="S19T5U201">lowestX</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70"> 70</a></span><span class="line"><span class="mxinfo " id="T5:U139"><span class="var type1" id="S27T5U204">yShrink</span> = <span class="var type1" id="S20T5U205">lowestY</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71"> 71</a></span><span class="line"><span class="mxinfo " id="T5:U142"><span class="var type1" id="S28T5U208">widthShrink</span> = <span class="mxinfo " id="T5:U144"><span class="var type1" id="S12T5U210">yDim</span>-<span class="var type1" id="S24T5U211">width</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,72" id="srcline72"> 72</a></span><span class="line"><span class="mxinfo " id="T5:U147"><span class="var type1" id="S29T5U214">heightShrink</span> = <span class="mxinfo " id="T5:U149"><span class="var type1" id="S11T5U216">xDim</span>-<span class="var type1" id="S25T5U217">height</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,73" id="srcline73"> 73</a></span><span class="line"><span class="mxinfo " id="T2:U152"><span class="var type1" id="S3T2U220">shrinks</span> = <span class="mxinfo " id="T2:U154">[<span class="var type1" id="S27T5U223">yShrink</span> <span class="var type1" id="S26T5U224">xShrink</span> <span class="var type1" id="S28T5U225">widthShrink</span> <span class="var type1" id="S29T5U226">heightShrink</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,74" id="srcline74"> 74</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,75" id="srcline75"> 75</a></span><span class="line"> <span class="mxinfo " id="T3:U159"><span class="var type1" id="S30T3U229">shrinkedImage</span> = <span class="mxinfo " id="T3:U161">imcrop(<span class="var type1" id="S4T3U232">img</span>,<span class="mxinfo " id="T2:U163">[<span class="var type1" id="S20T5U235">lowestY</span> <span class="var type1" id="S19T5U236">lowestX</span> <span class="var type1" id="S24T5U237">width</span> <span class="var type1" id="S25T5U238">height</span>]</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,76" id="srcline76"> 76</a></span><span class="line"> <span class="comment">%grayShrinkedImage  = getGrayScale( shrinkedImage ); </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,77" id="srcline77"> 77</a></span><span class="line"> [<span class="var type1" id="S32T4U242">x</span> <span class="var type1" id="S33T4U243">y</span>] = <span class="fcn" id="F408N4:B245">detectCorner</span>(<span class="var type1" id="S30T3U246">shrinkedImage</span>); <span class="comment">%Detect corner in shrinked image</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,78" id="srcline78"> 78</a></span><span class="line"> <span class="comment">%imshow(shrinkedImage)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,79" id="srcline79"> 79</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="1,80" id="srcline80"> 80</a></span><span class="line"> <span class="mxinfo " id="T5:U171">[<span class="var type1" id="S11T5U250">xDim</span>, <span class="var type1" id="S12T5U251">yDim</span>, <span class="var type1" id="S13T5U252">zDim</span>] = size(<span class="var type1" id="S30T3U255">shrinkedImage</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,81" id="srcline81"> 81</a></span><span class="line"> <span class="mxinfo " id="T5:U176"><span class="var type1" id="S15T5U258">len</span> = <span class="mxinfo " id="T5:U178">length(<span class="var type1" id="S32T4U261">x</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,82" id="srcline82"> 82</a></span><span class="line"> <span class="comment">%Check critical areas for presence of edges</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,83" id="srcline83"> 83</a></span><span class="line"> <span class="mxinfo " id="T5:U180"><span class="var type1" id="S35T5U264">edgeX</span>=<span class="mxinfo " id="T5:U182">0</span></span>; <span class="mxinfo " id="T5:U183"><span class="var type1" id="S36T5U268">edgeY</span>=<span class="mxinfo " id="T5:U185">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,84" id="srcline84"> 84</a></span><span class="line"> <span class="mxinfo " id="T5:U186"><span class="var type1" id="S37T5U272">topLeftPortion</span>      = <span class="mxinfo " id="T5:U188">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,85" id="srcline85"> 85</a></span><span class="line"> <span class="mxinfo " id="T5:U189"><span class="var type1" id="S38T5U276">topMiddlePortion</span>    = <span class="mxinfo " id="T5:U191">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,86" id="srcline86"> 86</a></span><span class="line"> <span class="mxinfo " id="T5:U192"><span class="var type1" id="S39T5U280">topRightPortion</span>     = <span class="mxinfo " id="T5:U194">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,87" id="srcline87"> 87</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,88" id="srcline88"> 88</a></span><span class="line"> <span class="mxinfo " id="T5:U195"><span class="var type1" id="S40T5U284">downLeftPortion</span>     = <span class="mxinfo " id="T5:U197">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,89" id="srcline89"> 89</a></span><span class="line"> <span class="mxinfo " id="T5:U198"><span class="var type1" id="S41T5U288">downMiddlePortion</span>   = <span class="mxinfo " id="T5:U200">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,90" id="srcline90"> 90</a></span><span class="line"> <span class="mxinfo " id="T5:U201"><span class="var type1" id="S42T5U292">downRightPortion</span>    = <span class="mxinfo " id="T5:U203">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,91" id="srcline91"> 91</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,92" id="srcline92"> 92</a></span><span class="line"> <span class="mxinfo " id="T5:U204"><span class="var type1" id="S43T5U296">middleLeftPortion</span>   = <span class="mxinfo " id="T5:U206">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,93" id="srcline93"> 93</a></span><span class="line"> <span class="mxinfo " id="T5:U207"><span class="var type1" id="S44T5U300">middleRightPortion</span>  = <span class="mxinfo " id="T5:U209">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,94" id="srcline94"> 94</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="1,95" id="srcline95"> 95</a></span><span class="line"> <span class="mxinfo " id="T5:U210"><span class="var type1" id="S45T5U304">regionSizeX</span> = <span class="mxinfo " id="T5:U212">ceil(<span class="mxinfo " id="T5:U213"><span class="var type1" id="S9T5U308">regionFactor</span>*<span class="var type1" id="S11T5U309">xDim</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,96" id="srcline96"> 96</a></span><span class="line"> <span class="mxinfo " id="T5:U216"><span class="var type1" id="S47T5U312">regionSizeY</span> = <span class="mxinfo " id="T5:U218">ceil(<span class="mxinfo " id="T5:U219"><span class="var type1" id="S9T5U316">regionFactor</span>*<span class="var type1" id="S12T5U317">yDim</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,97" id="srcline97"> 97</a></span><span class="line"> <span class="mxinfo " id="T5:U222"><span class="var type1" id="S48T5U320">tlsX</span> = <span class="mxinfo " id="T5:U224">1</span></span>; <span class="comment">%top-left start X</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,98" id="srcline98"> 98</a></span><span class="line"> <span class="mxinfo " id="T5:U225"><span class="var type1" id="S49T5U324">tlsY</span> = <span class="mxinfo " id="T5:U227">1</span></span>; <span class="comment">%top-left start Y</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,99" id="srcline99"> 99</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="1,100" id="srcline100">100</a></span><span class="line"> <span class="mxinfo " id="T5:U228"><span class="var type1" id="S50T5U328">tmsX</span> = <span class="mxinfo " id="T5:U230">1</span></span>; <span class="comment">%bottom-middle start X</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,101" id="srcline101">101</a></span><span class="line"> <span class="mxinfo " id="T5:U231"><span class="var type1" id="S51T5U332">tmsY</span> = <span class="mxinfo " id="T5:U233">(<span class="mxinfo " id="T5:U234"><span class="var type1" id="S12T5U336">yDim</span>/<span class="mxinfo " id="T5:U236">2</span></span>)-(<span class="mxinfo " id="T5:U237"><span class="mxinfo " id="T5:U238">ceil(<span class="mxinfo " id="T5:U239"><span class="var type1" id="S9T5U343">regionFactor</span>*<span class="var type1" id="S12T5U344">yDim</span></span>)</span>/<span class="mxinfo " id="T5:U242">2</span></span>)</span></span>; <span class="comment">%bottom-middle start Y</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,102" id="srcline102">102</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="1,103" id="srcline103">103</a></span><span class="line"> <span class="mxinfo " id="T5:U243"><span class="var type1" id="S52T5U348">trsX</span> = <span class="mxinfo " id="T5:U245">1</span></span>; <span class="comment">%top-right start X</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,104" id="srcline104">104</a></span><span class="line"> <span class="mxinfo " id="T5:U246"><span class="var type1" id="S53T5U352">trsY</span> = <span class="mxinfo " id="T5:U248"><span class="var type1" id="S12T5U354">yDim</span>-<span class="mxinfo " id="T5:U250">ceil(<span class="mxinfo " id="T5:U251"><span class="var type1" id="S9T5U358">regionFactor</span>*<span class="var type1" id="S12T5U359">yDim</span></span>)</span></span></span>; <span class="comment">%bottom-right start Y</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,105" id="srcline105">105</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="1,106" id="srcline106">106</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="1,107" id="srcline107">107</a></span><span class="line"> <span class="mxinfo " id="T5:U254"><span class="var type1" id="S54T5U362">mlsX</span> = <span class="mxinfo " id="T5:U256">(<span class="mxinfo " id="T5:U257"><span class="var type1" id="S11T5U366">xDim</span>/<span class="mxinfo " id="T5:U259">2</span></span>)-(<span class="mxinfo " id="T5:U260"><span class="mxinfo " id="T5:U261">ceil(<span class="mxinfo " id="T5:U262"><span class="var type1" id="S9T5U373">regionFactor</span>*<span class="var type1" id="S11T5U374">xDim</span></span>)</span>/<span class="mxinfo " id="T5:U265">2</span></span>)</span></span>; <span class="comment">%middle-left start X</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,108" id="srcline108">108</a></span><span class="line"> <span class="mxinfo " id="T5:U266"><span class="var type1" id="S55T5U378">mlsY</span> = <span class="mxinfo " id="T5:U268">1</span></span>; <span class="comment">%middle-left start Y</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,109" id="srcline109">109</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="1,110" id="srcline110">110</a></span><span class="line"> <span class="mxinfo " id="T5:U269"><span class="var type1" id="S56T5U382">mrsX</span> = <span class="mxinfo " id="T5:U271">(<span class="mxinfo " id="T5:U272"><span class="var type1" id="S11T5U386">xDim</span>/<span class="mxinfo " id="T5:U274">2</span></span>)-(<span class="mxinfo " id="T5:U275"><span class="mxinfo " id="T5:U276">ceil(<span class="mxinfo " id="T5:U277"><span class="var type1" id="S9T5U393">regionFactor</span>*<span class="var type1" id="S11T5U394">xDim</span></span>)</span>/<span class="mxinfo " id="T5:U280">2</span></span>)</span></span>; <span class="comment">%middle-right start X</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,111" id="srcline111">111</a></span><span class="line"> <span class="mxinfo " id="T5:U281"><span class="var type1" id="S57T5U398">mrsY</span> = <span class="mxinfo " id="T5:U283"><span class="var type1" id="S12T5U400">yDim</span>-<span class="mxinfo " id="T5:U285">ceil(<span class="mxinfo " id="T5:U286"><span class="var type1" id="S9T5U404">regionFactor</span>*<span class="var type1" id="S12T5U405">yDim</span></span>)</span></span></span>; <span class="comment">%middle-right start Y</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,112" id="srcline112">112</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="1,113" id="srcline113">113</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="1,114" id="srcline114">114</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="1,115" id="srcline115">115</a></span><span class="line"> <span class="mxinfo " id="T5:U289"><span class="var type1" id="S58T5U408">blsX</span> = <span class="mxinfo " id="T5:U291"><span class="var type1" id="S11T5U410">xDim</span> - <span class="mxinfo " id="T5:U293">ceil(<span class="mxinfo " id="T5:U294"><span class="var type1" id="S9T5U414">regionFactor</span>*<span class="var type1" id="S11T5U415">xDim</span></span>)</span></span></span>; <span class="comment">%bottom-left start X</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,116" id="srcline116">116</a></span><span class="line"> <span class="mxinfo " id="T5:U297"><span class="var type1" id="S59T5U418">blsY</span> = <span class="mxinfo " id="T5:U299">1</span></span>; <span class="comment">%bottom-left start Y</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,117" id="srcline117">117</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="1,118" id="srcline118">118</a></span><span class="line"> <span class="mxinfo " id="T5:U300"><span class="var type1" id="S60T5U422">bmsX</span> = <span class="mxinfo " id="T5:U302"><span class="var type1" id="S11T5U424">xDim</span> - <span class="mxinfo " id="T5:U304">ceil(<span class="mxinfo " id="T5:U305"><span class="var type1" id="S9T5U428">regionFactor</span>*<span class="var type1" id="S11T5U429">xDim</span></span>)</span></span></span>; <span class="comment">%bottom-middle start X</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,119" id="srcline119">119</a></span><span class="line"> <span class="mxinfo " id="T5:U308"><span class="var type1" id="S61T5U432">bmsY</span> = <span class="mxinfo " id="T5:U310">(<span class="mxinfo " id="T5:U311"><span class="var type1" id="S12T5U436">yDim</span>/<span class="mxinfo " id="T5:U313">2</span></span>)-(<span class="mxinfo " id="T5:U314"><span class="mxinfo " id="T5:U315">ceil(<span class="mxinfo " id="T5:U316"><span class="var type1" id="S9T5U443">regionFactor</span>*<span class="var type1" id="S12T5U444">yDim</span></span>)</span>/<span class="mxinfo " id="T5:U319">2</span></span>)</span></span>; <span class="comment">%bottom-middle start Y</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,120" id="srcline120">120</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="1,121" id="srcline121">121</a></span><span class="line"> <span class="mxinfo " id="T5:U320"><span class="var type1" id="S62T5U448">brsX</span> = <span class="mxinfo " id="T5:U322"><span class="var type1" id="S11T5U450">xDim</span> - <span class="mxinfo " id="T5:U324">ceil(<span class="mxinfo " id="T5:U325"><span class="var type1" id="S9T5U454">regionFactor</span>*<span class="var type1" id="S11T5U455">xDim</span></span>)</span></span></span>; <span class="comment">%bottom-right start X</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,122" id="srcline122">122</a></span><span class="line"> <span class="mxinfo " id="T5:U328"><span class="var type1" id="S63T5U458">brsY</span> = <span class="mxinfo " id="T5:U330"><span class="var type1" id="S12T5U460">yDim</span>-<span class="mxinfo " id="T5:U332">ceil(<span class="mxinfo " id="T5:U333"><span class="var type1" id="S9T5U464">regionFactor</span>*<span class="var type1" id="S12T5U465">yDim</span></span>)</span></span></span>; <span class="comment">%bottom-right start Y </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,123" id="srcline123">123</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="1,124" id="srcline124">124</a></span><span class="line"><span class="comment"><span class="comment">%{</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,125" id="srcline125">125</a></span><span class="line"><span class="comment"><span class="comment">%To detect Triangle and Square, pick 8 key areas in the image and test for corners</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,126" id="srcline126">126</a></span><span class="line"><span class="comment"><span class="comment">%SQUARE, UPWARD FACING TRIANGLE, DOWNWARD FACING TRIANGLE AND OCTAGON</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,127" id="srcline127">127</a></span><span class="line"><span class="comment"><span class="comment">%}</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,128" id="srcline128">128</a></span><span class="line">  </span></span>
<span class="srcline"><span class="lineno"><a href="1,129" id="srcline129">129</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S23T5U468">xLoop</span> = <span class="mxinfo " id="T5:U337">1</span>:<span class="var type1" id="S15T5U471">len</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,130" id="srcline130">130</a></span><span class="line">    <span class="mxinfo " id="T5:U339"><span class="var type1" id="S35T5U474">edgeX</span>=<span class="mxinfo " id="T5:U341"><span class="var type1" id="S32T4U476">x</span>(<span class="var type1" id="S23T5U477">xLoop</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,131" id="srcline131">131</a></span><span class="line">    <span class="mxinfo " id="T5:U344"><span class="var type1" id="S36T5U480">edgeY</span>=<span class="mxinfo " id="T5:U346"><span class="var type1" id="S33T4U482">y</span>(<span class="var type1" id="S23T5U483">xLoop</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,132" id="srcline132">132</a></span><span class="line">    <span class="comment">%TOP ROW</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,133" id="srcline133">133</a></span><span class="line">    <span class="comment">%Check top-left Area</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,134" id="srcline134">134</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T6:U349"><span class="var type1" id="S35T5U491">edgeX</span>&gt;=<span class="var type1" id="S48T5U492">tlsX</span></span> &amp;&amp; <span class="mxinfo " id="T6:U352"><span class="var type1" id="S35T5U494">edgeX</span>&lt;=<span class="mxinfo " id="T5:U354"><span class="var type1" id="S48T5U496">tlsX</span>+<span class="var type1" id="S45T5U497">regionSizeX</span></span></span> &amp;&amp; <span class="mxinfo " id="T6:U357"><span class="var type1" id="S36T5U499">edgeY</span>&gt;=<span class="var type1" id="S49T5U500">tlsY</span></span> &amp;&amp; <span class="mxinfo " id="T6:U360"><span class="var type1" id="S36T5U502">edgeY</span>&lt;=<span class="mxinfo " id="T5:U362"><span class="var type1" id="S49T5U504">tlsY</span>+<span class="var type1" id="S47T5U505">regionSizeY</span></span></span> &amp;&amp; <span class="mxinfo " id="T6:U365"><span class="var type1" id="S37T5U507">topLeftPortion</span>&lt;<span class="mxinfo " id="T5:U367">0.25</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,135" id="srcline135">135</a></span><span class="line">        <span class="mxinfo " id="T5:U368"><span class="var type1" id="S37T5U511">topLeftPortion</span> = <span class="mxinfo " id="T5:U370"><span class="var type1" id="S37T5U513">topLeftPortion</span>+<span class="mxinfo " id="T5:U372">0.25</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,136" id="srcline136">136</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,137" id="srcline137">137</a></span><span class="line">    <span class="comment">%Check Top-Middle Area</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,138" id="srcline138">138</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T6:U373"><span class="var type1" id="S35T5U522">edgeX</span>&gt;=<span class="var type1" id="S50T5U523">tmsX</span></span> &amp;&amp; <span class="mxinfo " id="T6:U376"><span class="var type1" id="S35T5U525">edgeX</span>&lt;=<span class="mxinfo " id="T5:U378"><span class="var type1" id="S50T5U527">tmsX</span>+<span class="var type1" id="S45T5U528">regionSizeX</span></span></span> &amp;&amp; <span class="mxinfo " id="T6:U381"><span class="var type1" id="S36T5U530">edgeY</span>&gt;=<span class="var type1" id="S51T5U531">tmsY</span></span> &amp;&amp; <span class="mxinfo " id="T6:U384"><span class="var type1" id="S36T5U533">edgeY</span>&lt;=<span class="mxinfo " id="T5:U386"><span class="var type1" id="S51T5U535">tmsY</span>+<span class="var type1" id="S47T5U536">regionSizeY</span></span></span> &amp;&amp; <span class="mxinfo " id="T6:U389"><span class="var type1" id="S38T5U538">topMiddlePortion</span>&lt;<span class="mxinfo " id="T5:U391">0.34</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,139" id="srcline139">139</a></span><span class="line">        <span class="mxinfo " id="T5:U392"><span class="var type1" id="S38T5U542">topMiddlePortion</span> = <span class="mxinfo " id="T5:U394"><span class="var type1" id="S38T5U544">topMiddlePortion</span>+<span class="mxinfo " id="T5:U396">0.34</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,140" id="srcline140">140</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,141" id="srcline141">141</a></span><span class="line">    <span class="comment">%Check Top-Right Area</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,142" id="srcline142">142</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T6:U397"><span class="var type1" id="S35T5U553">edgeX</span>&gt;=<span class="var type1" id="S52T5U554">trsX</span></span> &amp;&amp; <span class="mxinfo " id="T6:U400"><span class="var type1" id="S35T5U556">edgeX</span>&lt;=<span class="mxinfo " id="T5:U402"><span class="var type1" id="S52T5U558">trsX</span>+<span class="var type1" id="S45T5U559">regionSizeX</span></span></span> &amp;&amp; <span class="mxinfo " id="T6:U405"><span class="var type1" id="S36T5U561">edgeY</span>&gt;=<span class="var type1" id="S53T5U562">trsY</span></span> &amp;&amp; <span class="mxinfo " id="T6:U408"><span class="var type1" id="S36T5U564">edgeY</span>&lt;=<span class="mxinfo " id="T5:U410"><span class="var type1" id="S53T5U566">trsY</span>+<span class="var type1" id="S47T5U567">regionSizeY</span></span></span> &amp;&amp; <span class="mxinfo " id="T6:U413"><span class="var type1" id="S39T5U569">topRightPortion</span>&lt;<span class="mxinfo " id="T5:U415">0.25</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,143" id="srcline143">143</a></span><span class="line">        <span class="mxinfo " id="T5:U416"><span class="var type1" id="S39T5U573">topRightPortion</span> = <span class="mxinfo " id="T5:U418"><span class="var type1" id="S39T5U575">topRightPortion</span>+<span class="mxinfo " id="T5:U420">0.25</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,144" id="srcline144">144</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,145" id="srcline145">145</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,146" id="srcline146">146</a></span><span class="line">    <span class="comment">%MIDDLE ROW</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,147" id="srcline147">147</a></span><span class="line">    <span class="comment">%Check middle-left area</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,148" id="srcline148">148</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T6:U421"><span class="var type1" id="S35T5U583">edgeX</span>&gt;=<span class="var type1" id="S54T5U584">mlsX</span></span> &amp;&amp; <span class="mxinfo " id="T6:U424"><span class="var type1" id="S35T5U586">edgeX</span>&lt;=<span class="mxinfo " id="T5:U426"><span class="var type1" id="S54T5U588">mlsX</span>+<span class="var type1" id="S45T5U589">regionSizeX</span></span></span> &amp;&amp; <span class="mxinfo " id="T6:U429"><span class="var type1" id="S36T5U591">edgeY</span>&gt;=<span class="var type1" id="S55T5U592">mlsY</span></span> &amp;&amp; <span class="mxinfo " id="T6:U432"><span class="var type1" id="S36T5U594">edgeY</span>&lt;=<span class="mxinfo " id="T5:U434"><span class="var type1" id="S55T5U596">mlsY</span>+<span class="var type1" id="S47T5U597">regionSizeY</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,149" id="srcline149">149</a></span><span class="line">       <span class="mxinfo " id="T5:U437"><span class="var type1" id="S43T5U600">middleLeftPortion</span>= <span class="mxinfo " id="T5:U439"><span class="var type1" id="S43T5U602">middleLeftPortion</span>+<span class="mxinfo " id="T5:U441">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,150" id="srcline150">150</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,151" id="srcline151">151</a></span><span class="line">    <span class="comment">%Check middle-right area</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,152" id="srcline152">152</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T6:U442"><span class="var type1" id="S35T5U610">edgeX</span>&gt;=<span class="var type1" id="S56T5U611">mrsX</span></span> &amp;&amp; <span class="mxinfo " id="T6:U445"><span class="var type1" id="S35T5U613">edgeX</span>&lt;=<span class="mxinfo " id="T5:U447"><span class="var type1" id="S56T5U615">mrsX</span>+<span class="var type1" id="S45T5U616">regionSizeX</span></span></span> &amp;&amp; <span class="mxinfo " id="T6:U450"><span class="var type1" id="S36T5U618">edgeY</span>&gt;=<span class="var type1" id="S57T5U619">mrsY</span></span> &amp;&amp; <span class="mxinfo " id="T6:U453"><span class="var type1" id="S36T5U621">edgeY</span>&lt;=<span class="mxinfo " id="T5:U455"><span class="var type1" id="S57T5U623">mrsY</span>+<span class="var type1" id="S47T5U624">regionSizeY</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,153" id="srcline153">153</a></span><span class="line">       <span class="mxinfo " id="T5:U458"><span class="var type1" id="S44T5U627">middleRightPortion</span> = <span class="mxinfo " id="T5:U460"><span class="var type1" id="S44T5U629">middleRightPortion</span>+<span class="mxinfo " id="T5:U462">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,154" id="srcline154">154</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,155" id="srcline155">155</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,156" id="srcline156">156</a></span><span class="line">    <span class="comment">%BOTTOM ROW</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,157" id="srcline157">157</a></span><span class="line">     <span class="comment">%Check bottom-left Area</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,158" id="srcline158">158</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T6:U463"><span class="var type1" id="S35T5U638">edgeX</span>&gt;=<span class="var type1" id="S58T5U639">blsX</span></span> &amp;&amp; <span class="mxinfo " id="T6:U466"><span class="var type1" id="S35T5U641">edgeX</span>&lt;=<span class="mxinfo " id="T5:U468"><span class="var type1" id="S58T5U643">blsX</span>+<span class="var type1" id="S45T5U644">regionSizeX</span></span></span> &amp;&amp; <span class="mxinfo " id="T6:U471"><span class="var type1" id="S36T5U646">edgeY</span>&gt;=<span class="var type1" id="S59T5U647">blsY</span></span> &amp;&amp; <span class="mxinfo " id="T6:U474"><span class="var type1" id="S36T5U649">edgeY</span>&lt;=<span class="mxinfo " id="T5:U476"><span class="var type1" id="S59T5U651">blsY</span>+<span class="var type1" id="S47T5U652">regionSizeY</span></span></span> &amp;&amp; <span class="mxinfo " id="T6:U479"><span class="var type1" id="S40T5U654">downLeftPortion</span>&lt;<span class="mxinfo " id="T5:U481">0.25</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,159" id="srcline159">159</a></span><span class="line">        <span class="mxinfo " id="T5:U482"><span class="var type1" id="S40T5U658">downLeftPortion</span> = <span class="mxinfo " id="T5:U484"><span class="var type1" id="S40T5U660">downLeftPortion</span>+<span class="mxinfo " id="T5:U486">0.25</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,160" id="srcline160">160</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,161" id="srcline161">161</a></span><span class="line">    <span class="comment">%Check bottom-Middle Area</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,162" id="srcline162">162</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T6:U487"><span class="var type1" id="S35T5U669">edgeX</span>&gt;=<span class="var type1" id="S60T5U670">bmsX</span></span> &amp;&amp; <span class="mxinfo " id="T6:U490"><span class="var type1" id="S35T5U672">edgeX</span>&lt;=<span class="mxinfo " id="T5:U492"><span class="var type1" id="S60T5U674">bmsX</span>+<span class="var type1" id="S45T5U675">regionSizeX</span></span></span> &amp;&amp; <span class="mxinfo " id="T6:U495"><span class="var type1" id="S36T5U677">edgeY</span>&gt;=<span class="var type1" id="S61T5U678">bmsY</span></span> &amp;&amp; <span class="mxinfo " id="T6:U498"><span class="var type1" id="S36T5U680">edgeY</span>&lt;=<span class="mxinfo " id="T5:U500"><span class="var type1" id="S61T5U682">bmsY</span>+<span class="var type1" id="S47T5U683">regionSizeY</span></span></span> &amp;&amp; <span class="mxinfo " id="T6:U503"><span class="var type1" id="S41T5U685">downMiddlePortion</span>&lt;<span class="mxinfo " id="T5:U505">0.34</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,163" id="srcline163">163</a></span><span class="line">        <span class="mxinfo " id="T5:U506"><span class="var type1" id="S41T5U689">downMiddlePortion</span> = <span class="mxinfo " id="T5:U508"><span class="var type1" id="S41T5U691">downMiddlePortion</span>+<span class="mxinfo " id="T5:U510">0.34</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,164" id="srcline164">164</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,165" id="srcline165">165</a></span><span class="line">    <span class="comment">%Check bottom-Right Area</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,166" id="srcline166">166</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T6:U511"><span class="var type1" id="S35T5U700">edgeX</span>&gt;=<span class="var type1" id="S62T5U701">brsX</span></span> &amp;&amp; <span class="mxinfo " id="T6:U514"><span class="var type1" id="S35T5U703">edgeX</span>&lt;=<span class="mxinfo " id="T5:U516"><span class="var type1" id="S62T5U705">brsX</span>+<span class="var type1" id="S45T5U706">regionSizeX</span></span></span> &amp;&amp; <span class="mxinfo " id="T6:U519"><span class="var type1" id="S36T5U708">edgeY</span>&gt;=<span class="var type1" id="S63T5U709">brsY</span></span> &amp;&amp; <span class="mxinfo " id="T6:U522"><span class="var type1" id="S36T5U711">edgeY</span>&lt;=<span class="mxinfo " id="T5:U524"><span class="var type1" id="S63T5U713">brsY</span>+<span class="var type1" id="S47T5U714">regionSizeY</span></span></span> &amp;&amp;<span class="mxinfo " id="T6:U527"><span class="var type1" id="S42T5U716">downRightPortion</span>&lt;<span class="mxinfo " id="T5:U529">0.25</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,167" id="srcline167">167</a></span><span class="line">        <span class="mxinfo " id="T5:U530"><span class="var type1" id="S42T5U720">downRightPortion</span> = <span class="mxinfo " id="T5:U532"><span class="var type1" id="S42T5U722">downRightPortion</span>+<span class="mxinfo " id="T5:U534">0.25</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,168" id="srcline168">168</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,169" id="srcline169">169</a></span><span class="line"><span class="keyword">end</span> <span class="comment">%end of xLoop</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,170" id="srcline170">170</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,171" id="srcline171">171</a></span><span class="line"><span class="comment"><span class="comment">%{ </span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,172" id="srcline172">172</a></span><span class="line"><span class="comment">Analysis based on recommendations from this paper&gt;&gt; </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,173" id="srcline173">173</a></span><span class="line"><span class="comment">AUTOMATIC DETECTION AND CLASSIFICATION OF TRAFFIC SIGNS</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,174" id="srcline174">174</a></span><span class="line"><span class="comment">By Carlos Filipe Paulo, Paulo Lobato Correia </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,175" id="srcline175">175</a></span><span class="line"><span class="comment">                          </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,176" id="srcline176">176</a></span><span class="line"><span class="comment">sqp = tl + tr + bl + br (5) - Square</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,177" id="srcline177">177</a></span><span class="line"><span class="comment">tup = 1.32 ×(bl + br) + tc ?1.1×(tl + tr) (6) - Upward pointing rectangle</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,178" id="srcline178">178</a></span><span class="line"><span class="comment">tdp = 1.32 ×(tl + tr) + bc ?1.1× (bl + br) (7) - downward pointing rectangle</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,179" id="srcline179">179</a></span><span class="line"><span class="comment"> <span class="comment">%}</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,180" id="srcline180">180</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,181" id="srcline181">181</a></span><span class="line"><span class="mxinfo " id="T5:U535"><span class="var type1" id="S64T5U726">rectangleChance</span> = <span class="mxinfo " id="T5:U537"><span class="mxinfo " id="T5:U538"><span class="mxinfo " id="T5:U539"><span class="var type1" id="S39T5U730">topRightPortion</span>+<span class="var type1" id="S37T5U731">topLeftPortion</span></span>+<span class="var type1" id="S40T5U732">downLeftPortion</span></span>+<span class="var type1" id="S42T5U733">downRightPortion</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,182" id="srcline182">182</a></span><span class="line"><span class="mxinfo " id="T5:U544"><span class="var type1" id="S65T5U736">triangleUpChance</span> = <span class="mxinfo " id="T5:U546">(<span class="mxinfo " id="T5:U547"><span class="mxinfo " id="T5:U548">1.32</span>*(<span class="mxinfo " id="T5:U549"><span class="var type1" id="S40T5U743">downLeftPortion</span>+<span class="var type1" id="S42T5U744">downRightPortion</span></span>)</span>) + (<span class="mxinfo " id="T5:U552"><span class="var type1" id="S38T5U747">topMiddlePortion</span> - (<span class="mxinfo " id="T5:U554"><span class="mxinfo " id="T5:U555">1.1</span>*(<span class="mxinfo " id="T5:U556"><span class="var type1" id="S37T5U753">topLeftPortion</span>+<span class="var type1" id="S39T5U754">topRightPortion</span></span>)</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,183" id="srcline183">183</a></span><span class="line"><span class="mxinfo " id="T5:U559"><span class="var type1" id="S66T5U757">triangleDownChance</span> = <span class="mxinfo " id="T5:U561">(<span class="mxinfo " id="T5:U562"><span class="mxinfo " id="T5:U563">1.32</span>*(<span class="mxinfo " id="T5:U564"><span class="var type1" id="S37T5U764">topLeftPortion</span>+<span class="var type1" id="S39T5U765">topRightPortion</span></span>)</span>) + (<span class="mxinfo " id="T5:U567"><span class="var type1" id="S41T5U768">downMiddlePortion</span> - (<span class="mxinfo " id="T5:U569"><span class="mxinfo " id="T5:U570">1.1</span>*(<span class="mxinfo " id="T5:U571"><span class="var type1" id="S40T5U774">downLeftPortion</span>+<span class="var type1" id="S42T5U775">downRightPortion</span></span>)</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,184" id="srcline184">184</a></span><span class="line"><span class="mxinfo " id="T1:U574"><span class="var type1" id="S2T1U778">chances</span> = <span class="mxinfo " id="T1:U576">[<span class="var type1" id="S64T5U781">rectangleChance</span> <span class="var type1" id="S65T5U782">triangleUpChance</span> <span class="var type1" id="S66T5U783">triangleDownChance</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,185" id="srcline185">185</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,186" id="srcline186">186</a></span><span class="line"><span class="comment">%fprintf('Shape Analysis For Traingles and Rectangles Done\n');</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,187" id="srcline187">187</a></span><span class="line"><span class="comment">%sprintf('Rectangle Presence Chance: %f%%\n', rectangleChance);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,188" id="srcline188">188</a></span><span class="line"><span class="comment">%sprintf('Triangle (Up) Presence Chance: %f%%\n', triangleUpChance);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,189" id="srcline189">189</a></span><span class="line"><span class="comment">%sprintf('Triangle (Down) Presence Chance: %f%%\n', triangleDownChance);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,190" id="srcline190">190</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
