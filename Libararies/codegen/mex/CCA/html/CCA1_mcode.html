<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> [ <span class="var type1" id="S2T1U3">xBlocks</span>, <span class="var type1" id="S3T1U4">yBlocks</span>, <span class="var type1" id="S4T1U5">totalBlocks</span>, <span class="var type1" id="S5T2U6">regionSizeTracker</span>, <span class="var type1" id="S6T3U7">Map</span> ] = CCA( <span class="var type1" id="S7T1U10">xDim</span>, <span class="var type1" id="S8T1U11">yDim</span>, <span class="var type1" id="S9T1U12">zDim</span>, <span class="var type1" id="S10T1U13">stepSize</span>, <span class="var type1" id="S11T1U14">beacon</span>, <span class="var type1" id="S12T1U15">windowSize</span>, <span class="var type1" id="S13T5U16">regionShed</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2">  2</a></span><span class="line"><span class="comment">%CCA Connected Component Analysis</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3">  3</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4">  4</a></span><span class="line"><span class="comment">%Initialize aprameters and variables</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5">  5</a></span><span class="line"><span class="var type1" id="S14T6U19">startX</span> = 1; <span class="var type1" id="S15T6U23">startY</span> = 1; <span class="var type1" id="S16T1U27">stopX</span> = <span class="var type1" id="S12T1U28">windowSize</span>; <span class="var type1" id="S17T1U31">stopY</span> = <span class="var type1" id="S12T1U32">windowSize</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6">  6</a></span><span class="line"><span class="var type1" id="S2T1U35">xBlocks</span> = ((<span class="var type1" id="S7T1U41">xDim</span>-<span class="var type1" id="S12T1U42">windowSize</span>)/<span class="var type1" id="S10T1U43">stepSize</span>)+<span class="mxinfo " id="T6:U23">1</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7">  7</a></span><span class="line"><span class="var type1" id="S3T1U47">yBlocks</span> = ((<span class="var type1" id="S8T1U53">yDim</span>-<span class="var type1" id="S12T1U54">windowSize</span>)/<span class="var type1" id="S10T1U55">stepSize</span>)+<span class="mxinfo " id="T6:U28">1</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8">  8</a></span><span class="line"><span class="var type1" id="S18T6U59">xCounter</span>=1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9">  9</a></span><span class="line"><span class="var type1" id="S19T6U63">yCounter</span>=1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10"> 10</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11"> 11</a></span><span class="line"><span class="var type0" id="S20T0U67">hueCheck</span>=0; <span class="var type0" id="S21T0U71">saturationCheck</span>=0; <span class="var type0" id="S22T0U75">valueCheck</span>=0;</span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12"> 12</a></span><span class="line"><span class="var type0" id="S23T0U79">regionSum</span>=0; <span class="comment">%Sum of the number of Pixels which are potentialy members of the ROI</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13"> 13</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14"> 14</a></span><span class="line"><span class="var type1" id="S4T1U83">totalBlocks</span> = <span class="var type1" id="S2T1U85">xBlocks</span> * <span class="var type1" id="S3T1U86">yBlocks</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15"> 15</a></span><span class="line"><span class="var type0" id="S24T0U89">regionMap</span> = zeros(<span class="var type1" id="S2T1U92">xBlocks</span>,<span class="var type1" id="S3T1U93">yBlocks</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16"> 16</a></span><span class="line"><span class="comment">%regionMap = gpuArray(regionMap1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17"> 17</a></span><span class="line"><span class="var type1" id="S6T3U96">Map</span> = <span class="fcn" id="F33N3:B98">MapRegion</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18"> 18</a></span><span class="line"><span class="var type1" id="S6T3U102">Map</span>(<span class="var type1" id="S2T1U103">xBlocks</span>,<span class="var type1" id="S3T1U104">yBlocks</span>) = <span class="fcn" id="F33N3:B106">MapRegion</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19"> 19</a></span><span class="line"><span class="var type0" id="S5T0U109">regionSizeTracker</span> = zeros(<span class="mxinfo " id="T6:U40">1</span>,<span class="var type1" id="S4T1U113">totalBlocks</span>); </span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20"> 20</a></span><span class="line"><span class="comment">%regionSizeTracker= gpuArray(regionSizeTracker1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21"> 21</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22"> 22</a></span><span class="line"><span class="var type0" id="S27T0U116">myLeftNeighVal</span> =0; <span class="var type0" id="S28T0U120">myRightNeighVal</span> = 0; <span class="var type0" id="S29T0U124">myTopNeighVal</span> = 0; <span class="var type0" id="S30T0U128">myBottomNeighVal</span>=0;</span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23"> 23</a></span><span class="line"><span class="var type0" id="S31T0U132">myLeftNeigRegion</span> =-1; <span class="var type0" id="S32T0U137">myRightNeighRegion</span> = -1; <span class="var type0" id="S33T0U142">myTopNeighRegion</span> = -1; <span class="var type0" id="S34T0U147">myBottomNeighRegion</span>=-1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24"> 24</a></span><span class="line"><span class="var type0" id="S35T0U152">regionCounter</span>=1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25"> 25</a></span><span class="line"><span class="var type0" id="S36T0U156">regionsum2</span>=0;</span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26"> 26</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27"> 27</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28"> 28</a></span><span class="line"> <span class="keyword">for</span> <span class="var type1" id="S37T1U160">BlockLoop</span> = 1:<span class="var type1" id="S4T1U163">totalBlocks</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29"> 29</a></span><span class="line">      <span class="var type0" id="S23T0U166">regionSum</span>=0;  </span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30"> 30</a></span><span class="line">      <span class="var type1" id="S38T6U170">xCount</span> = <span class="var type1" id="S18T6U171">xCounter</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31"> 31</a></span><span class="line">      <span class="var type1" id="S39T6U174">yCount</span> = <span class="var type1" id="S19T6U175">yCounter</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32"> 32</a></span><span class="line">      </span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33"> 33</a></span><span class="line">      <span class="comment">%Pixel Sum Pooling happens here </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34"> 34</a></span><span class="line">     <span class="var type1" id="S23T6U178">regionSum</span> = sum(sum(<span class="var type1" id="S13T5U184">regionShed</span>(<span class="var type1" id="S14T6U186">startX</span>:<span class="var type1" id="S16T1U187">stopX</span>, <span class="var type1" id="S15T6U189">startY</span>:<span class="var type1" id="S17T1U190">stopY</span>)));</span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35"> 35</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36"> 36</a></span><span class="line">     <span class="comment">%Save region's potential &amp; Link Regions Together</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37"> 37</a></span><span class="line">     <span class="var type0" id="S24T0U194">regionMap</span>(<span class="var type0" id="S18T0U195">xCounter</span>, <span class="var type0" id="S19T0U196">yCounter</span>) = <span class="var type1" id="S23T6U197">regionSum</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38"> 38</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39"> 39</a></span><span class="line">     <span class="message error" id="M1F1C"><span class="var type1" id="S6T3U202">Map</span>(<span class="var type1" id="S38T6U203">xCount</span>, <span class="var type1" id="S39T6U204">yCount</span>).value</span> = <span class="var type1" id="S23T6U206">regionSum</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40"> 40</a></span><span class="line">     <span class="message error" id="M2F1C"><span class="var type1" id="S6T3U211">Map</span>(<span class="var type1" id="S38T6U212">xCount</span>,<span class="var type1" id="S39T6U213">yCount</span>).xCoord</span> = <span class="var type1" id="S38T6U215">xCount</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,41" id="srcline41"> 41</a></span><span class="line">     <span class="message error" id="M3F1C"><span class="var type1" id="S6T3U220">Map</span>(<span class="var type1" id="S38T6U221">xCount</span>,<span class="var type1" id="S39T6U222">yCount</span>).yCoord</span> = <span class="var type1" id="S39T6U224">yCount</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,42" id="srcline42"> 42</a></span><span class="line">      <span class="keyword">if</span> <span class="var type1" id="S38T6U229">xCount</span>==1 &amp;&amp; <span class="var type1" id="S39T6U232">yCount</span> ==1</span></span>
<span class="srcline"><span class="lineno"><a href="1,43" id="srcline43"> 43</a></span><span class="line">         <span class="message error" id="M4F1C"><span class="var type1" id="S6T3U238">Map</span>(<span class="var type1" id="S38T6U239">xCount</span>,<span class="var type1" id="S39T6U240">yCount</span>).left</span>=<span class="var type1" id="S6T3U243">Map</span>(<span class="var type1" id="S38T6U244">xCount</span>,<span class="var type1" id="S39T6U245">yCount</span>); </span></span>
<span class="srcline"><span class="lineno"><a href="1,44" id="srcline44"> 44</a></span><span class="line">         <span class="message error" id="M5F1C"><span class="var type1" id="S6T3U250">Map</span>(<span class="var type1" id="S38T6U251">xCount</span>,<span class="var type1" id="S39T6U252">yCount</span>).right</span>=<span class="var type1" id="S6T3U255">Map</span>(<span class="var type1" id="S38T6U257">xCount</span>+1,<span class="var type1" id="S39T6U259">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,45" id="srcline45"> 45</a></span><span class="line">         <span class="message error" id="M6F1C"><span class="var type1" id="S6T3U264">Map</span>(<span class="var type1" id="S38T6U265">xCount</span>,<span class="var type1" id="S39T6U266">yCount</span>).top</span>=<span class="var type1" id="S6T3U269">Map</span>(<span class="var type1" id="S38T6U270">xCount</span>,<span class="var type1" id="S39T6U271">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,46" id="srcline46"> 46</a></span><span class="line">         <span class="message error" id="M7F1C"><span class="var type1" id="S6T3U276">Map</span>(<span class="var type1" id="S38T6U277">xCount</span>,<span class="var type1" id="S39T6U278">yCount</span>).bottom</span>=<span class="var type1" id="S6T3U281">Map</span>(<span class="var type1" id="S38T6U282">xCount</span>,<span class="var type1" id="S39T6U284">yCount</span>+1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,47" id="srcline47"> 47</a></span><span class="line">      <span class="keyword">elseif</span> <span class="var type1" id="S38T6U289">xCount</span>==<span class="var type1" id="S2T1U290">xBlocks</span> &amp;&amp; <span class="var type1" id="S39T6U292">yCount</span> ==1</span></span>
<span class="srcline"><span class="lineno"><a href="1,48" id="srcline48"> 48</a></span><span class="line">         <span class="message error" id="M8F1C"><span class="var type1" id="S6T3U298">Map</span>(<span class="var type1" id="S38T6U299">xCount</span>,<span class="var type1" id="S39T6U300">yCount</span>).left</span>=<span class="var type1" id="S6T3U303">Map</span>(<span class="var type1" id="S38T6U305">xCount</span>-1,<span class="var type1" id="S39T6U307">yCount</span>); </span></span>
<span class="srcline"><span class="lineno"><a href="1,49" id="srcline49"> 49</a></span><span class="line">         <span class="message error" id="M9F1C"><span class="var type1" id="S6T3U312">Map</span>(<span class="var type1" id="S38T6U313">xCount</span>,<span class="var type1" id="S39T6U314">yCount</span>).right</span>=<span class="var type1" id="S6T3U317">Map</span>(<span class="var type1" id="S38T6U318">xCount</span>,<span class="var type1" id="S39T6U319">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50"> 50</a></span><span class="line">         <span class="message error" id="M10F1C"><span class="var type1" id="S6T3U324">Map</span>(<span class="var type1" id="S38T6U325">xCount</span>,<span class="var type1" id="S39T6U326">yCount</span>).top</span>=<span class="var type1" id="S6T3U329">Map</span>(<span class="var type1" id="S38T6U330">xCount</span>,<span class="var type1" id="S39T6U331">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51"> 51</a></span><span class="line">         <span class="message error" id="M11F1C"><span class="var type1" id="S6T3U336">Map</span>(<span class="var type1" id="S38T6U337">xCount</span>,<span class="var type1" id="S39T6U338">yCount</span>).bottom</span>=<span class="var type1" id="S6T3U341">Map</span>(<span class="var type1" id="S38T6U342">xCount</span>,<span class="var type1" id="S39T6U344">yCount</span>+1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52"> 52</a></span><span class="line">      <span class="keyword">elseif</span> <span class="var type1" id="S38T6U349">xCount</span>==1 &amp;&amp; <span class="var type1" id="S39T6U352">yCount</span>==<span class="var type1" id="S3T1U353">yBlocks</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53"> 53</a></span><span class="line">         <span class="message error" id="M12F1C"><span class="var type1" id="S6T3U358">Map</span>(<span class="var type1" id="S38T6U359">xCount</span>,<span class="var type1" id="S39T6U360">yCount</span>).left</span>=<span class="var type1" id="S6T3U363">Map</span>(<span class="var type1" id="S38T6U364">xCount</span>,<span class="var type1" id="S39T6U365">yCount</span>); </span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54"> 54</a></span><span class="line">         <span class="message error" id="M13F1C"><span class="var type1" id="S6T3U370">Map</span>(<span class="var type1" id="S38T6U371">xCount</span>,<span class="var type1" id="S39T6U372">yCount</span>).right</span>=<span class="var type1" id="S6T3U375">Map</span>(<span class="var type1" id="S38T6U377">xCount</span>+1,<span class="var type1" id="S39T6U379">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55"> 55</a></span><span class="line">         <span class="message error" id="M14F1C"><span class="var type1" id="S6T3U384">Map</span>(<span class="var type1" id="S38T6U385">xCount</span>,<span class="var type1" id="S39T6U386">yCount</span>).top</span>=<span class="var type1" id="S6T3U389">Map</span>(<span class="var type1" id="S38T6U390">xCount</span>,<span class="var type1" id="S39T6U392">yCount</span>-1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56"> 56</a></span><span class="line">         <span class="message error" id="M15F1C"><span class="var type1" id="S6T3U398">Map</span>(<span class="var type1" id="S38T6U399">xCount</span>,<span class="var type1" id="S39T6U400">yCount</span>).bottom</span>=<span class="var type1" id="S6T3U403">Map</span>(<span class="var type1" id="S38T6U404">xCount</span>,<span class="var type1" id="S39T6U405">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57"> 57</a></span><span class="line">      <span class="keyword">elseif</span> <span class="var type1" id="S38T6U409">xCount</span>==<span class="var type1" id="S2T1U410">xBlocks</span> &amp;&amp; <span class="var type1" id="S39T6U412">yCount</span>==<span class="var type1" id="S3T1U413">yBlocks</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58"> 58</a></span><span class="line">         <span class="message error" id="M16F1C"><span class="var type1" id="S6T3U418">Map</span>(<span class="var type1" id="S38T6U419">xCount</span>,<span class="var type1" id="S39T6U420">yCount</span>).left</span>=<span class="var type1" id="S6T3U423">Map</span>(<span class="var type1" id="S38T6U425">xCount</span>-1,<span class="var type1" id="S39T6U427">yCount</span>); </span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59"> 59</a></span><span class="line">         <span class="message error" id="M17F1C"><span class="var type1" id="S6T3U432">Map</span>(<span class="var type1" id="S38T6U433">xCount</span>,<span class="var type1" id="S39T6U434">yCount</span>).right</span>=<span class="var type1" id="S6T3U437">Map</span>(<span class="var type1" id="S38T6U438">xCount</span>,<span class="var type1" id="S39T6U439">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60"> 60</a></span><span class="line">         <span class="message error" id="M18F1C"><span class="var type1" id="S6T3U444">Map</span>(<span class="var type1" id="S38T6U445">xCount</span>,<span class="var type1" id="S39T6U446">yCount</span>).top</span>=<span class="var type1" id="S6T3U449">Map</span>(<span class="var type1" id="S38T6U450">xCount</span>,<span class="var type1" id="S39T6U452">yCount</span>-1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61"> 61</a></span><span class="line">         <span class="message error" id="M19F1C"><span class="var type1" id="S6T3U458">Map</span>(<span class="var type1" id="S38T6U459">xCount</span>,<span class="var type1" id="S39T6U460">yCount</span>).bottom</span>=<span class="var type1" id="S6T3U463">Map</span>(<span class="var type1" id="S38T6U464">xCount</span>,<span class="var type1" id="S39T6U465">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62"> 62</a></span><span class="line">      <span class="keyword">elseif</span> <span class="var type1" id="S38T6U468">xCount</span>==1</span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63"> 63</a></span><span class="line">         <span class="message error" id="M20F1C"><span class="var type1" id="S6T3U474">Map</span>(<span class="var type1" id="S38T6U475">xCount</span>,<span class="var type1" id="S39T6U476">yCount</span>).left</span>=<span class="var type1" id="S6T3U479">Map</span>(<span class="var type1" id="S38T6U480">xCount</span>,<span class="var type1" id="S39T6U481">yCount</span>); </span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64"> 64</a></span><span class="line">         <span class="message error" id="M21F1C"><span class="var type1" id="S6T3U486">Map</span>(<span class="var type1" id="S38T6U487">xCount</span>,<span class="var type1" id="S39T6U488">yCount</span>).right</span>=<span class="var type1" id="S6T3U491">Map</span>(<span class="var type1" id="S38T6U493">xCount</span>+1,<span class="var type1" id="S39T6U495">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65"> 65</a></span><span class="line">         <span class="message error" id="M22F1C"><span class="var type1" id="S6T3U500">Map</span>(<span class="var type1" id="S38T6U501">xCount</span>,<span class="var type1" id="S39T6U502">yCount</span>).top</span>=<span class="var type1" id="S6T3U505">Map</span>(<span class="var type1" id="S38T6U506">xCount</span>,<span class="var type1" id="S39T6U508">yCount</span>-1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66"> 66</a></span><span class="line">         <span class="message error" id="M23F1C"><span class="var type1" id="S6T3U514">Map</span>(<span class="var type1" id="S38T6U515">xCount</span>,<span class="var type1" id="S39T6U516">yCount</span>).bottom</span>=<span class="var type1" id="S6T3U519">Map</span>(<span class="var type1" id="S38T6U520">xCount</span>,<span class="var type1" id="S39T6U522">yCount</span>+1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67"> 67</a></span><span class="line">      <span class="keyword">elseif</span> <span class="var type1" id="S38T6U526">xCount</span>==<span class="var type1" id="S2T1U527">xBlocks</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68"> 68</a></span><span class="line">         <span class="message fatal" id="M24F1C"><span class="var type1" id="S6T3U532">Map</span>(<span class="var type1" id="S38T6U533">xCount</span>,<span class="var type1" id="S39T6U534">yCount</span>).left</span>=<span class="var type1" id="S6T3U537">Map</span>(<span class="var type1" id="S38T6U539">xCount</span>-1,<span class="var type1" id="S39T6U541">yCount</span>); </span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69"> 69</a></span><span class="line">         <span class="var type0" id="S6T0U546">Map</span>(<span class="var type0" id="S38T0U547">xCount</span>,<span class="var type0" id="S39T0U548">yCount</span>).right=<span class="var type0" id="S6T0U551">Map</span>(<span class="var type0" id="S38T0U552">xCount</span>,<span class="var type0" id="S39T0U553">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70"> 70</a></span><span class="line">         <span class="var type0" id="S6T0U558">Map</span>(<span class="var type0" id="S38T0U559">xCount</span>,<span class="var type0" id="S39T0U560">yCount</span>).top=<span class="var type0" id="S6T0U563">Map</span>(<span class="var type0" id="S38T0U564">xCount</span>,<span class="var type0" id="S39T0U566">yCount</span>-1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71"> 71</a></span><span class="line">         <span class="var type0" id="S6T0U572">Map</span>(<span class="var type0" id="S38T0U573">xCount</span>,<span class="var type0" id="S39T0U574">yCount</span>).bottom=<span class="var type0" id="S6T0U577">Map</span>(<span class="var type0" id="S38T0U578">xCount</span>,<span class="var type0" id="S39T0U580">yCount</span>+1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,72" id="srcline72"> 72</a></span><span class="line">      <span class="keyword">elseif</span> <span class="var type0" id="S39T0U584">yCount</span>==1</span></span>
<span class="srcline"><span class="lineno"><a href="1,73" id="srcline73"> 73</a></span><span class="line">         <span class="var type0" id="S6T0U590">Map</span>(<span class="var type0" id="S38T0U591">xCount</span>,<span class="var type0" id="S39T0U592">yCount</span>).left=<span class="var type0" id="S6T0U595">Map</span>(<span class="var type0" id="S38T0U597">xCount</span>-1,<span class="var type0" id="S39T0U599">yCount</span>); </span></span>
<span class="srcline"><span class="lineno"><a href="1,74" id="srcline74"> 74</a></span><span class="line">         <span class="var type0" id="S6T0U604">Map</span>(<span class="var type0" id="S38T0U605">xCount</span>,<span class="var type0" id="S39T0U606">yCount</span>).right=<span class="var type0" id="S6T0U609">Map</span>(<span class="var type0" id="S38T0U611">xCount</span>+1,<span class="var type0" id="S39T0U613">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,75" id="srcline75"> 75</a></span><span class="line">         <span class="var type0" id="S6T0U618">Map</span>(<span class="var type0" id="S38T0U619">xCount</span>,<span class="var type0" id="S39T0U620">yCount</span>).top=<span class="var type0" id="S6T0U623">Map</span>(<span class="var type0" id="S38T0U624">xCount</span>,<span class="var type0" id="S39T0U625">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,76" id="srcline76"> 76</a></span><span class="line">         <span class="var type0" id="S6T0U630">Map</span>(<span class="var type0" id="S38T0U631">xCount</span>,<span class="var type0" id="S39T0U632">yCount</span>).bottom=<span class="var type0" id="S6T0U635">Map</span>(<span class="var type0" id="S38T0U636">xCount</span>,<span class="var type0" id="S39T0U638">yCount</span>+1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,77" id="srcline77"> 77</a></span><span class="line">      <span class="keyword">elseif</span> <span class="var type0" id="S39T0U642">yCount</span>==<span class="var type0" id="S3T0U643">yBlocks</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,78" id="srcline78"> 78</a></span><span class="line">         <span class="var type0" id="S6T0U648">Map</span>(<span class="var type0" id="S38T0U649">xCount</span>,<span class="var type0" id="S39T0U650">yCount</span>).left=<span class="var type0" id="S6T0U653">Map</span>(<span class="var type0" id="S38T0U655">xCount</span>-1,<span class="var type0" id="S39T0U657">yCount</span>); </span></span>
<span class="srcline"><span class="lineno"><a href="1,79" id="srcline79"> 79</a></span><span class="line">         <span class="var type0" id="S6T0U662">Map</span>(<span class="var type0" id="S38T0U663">xCount</span>,<span class="var type0" id="S39T0U664">yCount</span>).right=<span class="var type0" id="S6T0U667">Map</span>(<span class="var type0" id="S38T0U669">xCount</span>+1,<span class="var type0" id="S39T0U671">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,80" id="srcline80"> 80</a></span><span class="line">         <span class="var type0" id="S6T0U676">Map</span>(<span class="var type0" id="S38T0U677">xCount</span>,<span class="var type0" id="S39T0U678">yCount</span>).top=<span class="var type0" id="S6T0U681">Map</span>(<span class="var type0" id="S38T0U682">xCount</span>,<span class="var type0" id="S39T0U684">yCount</span>-1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,81" id="srcline81"> 81</a></span><span class="line">         <span class="var type0" id="S6T0U690">Map</span>(<span class="var type0" id="S38T0U691">xCount</span>,<span class="var type0" id="S39T0U692">yCount</span>).bottom=<span class="var type0" id="S6T0U695">Map</span>(<span class="var type0" id="S38T0U696">xCount</span>,<span class="var type0" id="S39T0U697">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,82" id="srcline82"> 82</a></span><span class="line">      <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,83" id="srcline83"> 83</a></span><span class="line">         <span class="var type0" id="S6T0U703">Map</span>(<span class="var type0" id="S38T0U704">xCount</span>,<span class="var type0" id="S39T0U705">yCount</span>).left=<span class="var type0" id="S6T0U708">Map</span>(<span class="var type0" id="S38T0U710">xCount</span>-1,<span class="var type0" id="S39T0U712">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,84" id="srcline84"> 84</a></span><span class="line">         <span class="var type0" id="S6T0U717">Map</span>(<span class="var type0" id="S38T0U718">xCount</span>,<span class="var type0" id="S39T0U719">yCount</span>).right=<span class="var type0" id="S6T0U722">Map</span>(<span class="var type0" id="S38T0U724">xCount</span>+1,<span class="var type0" id="S39T0U726">yCount</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,85" id="srcline85"> 85</a></span><span class="line">         <span class="var type0" id="S6T0U731">Map</span>(<span class="var type0" id="S38T0U732">xCount</span>,<span class="var type0" id="S39T0U733">yCount</span>).top=<span class="var type0" id="S6T0U736">Map</span>(<span class="var type0" id="S38T0U737">xCount</span>,<span class="var type0" id="S39T0U739">yCount</span>-1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,86" id="srcline86"> 86</a></span><span class="line">         <span class="var type0" id="S6T0U745">Map</span>(<span class="var type0" id="S38T0U746">xCount</span>,<span class="var type0" id="S39T0U747">yCount</span>).bottom=<span class="var type0" id="S6T0U750">Map</span>(<span class="var type0" id="S38T0U751">xCount</span>,<span class="var type0" id="S39T0U753">yCount</span>+1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,87" id="srcline87"> 87</a></span><span class="line">      <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,88" id="srcline88"> 88</a></span><span class="line">      </span></span>
<span class="srcline"><span class="lineno"><a href="1,89" id="srcline89"> 89</a></span><span class="line">     <span class="comment">%Check to see if current region is bright enough</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,90" id="srcline90"> 90</a></span><span class="line">     <span class="keyword">if</span> <span class="var type0" id="S6T0U760">Map</span>(<span class="var type0" id="S38T0U761">xCount</span>, <span class="var type0" id="S39T0U762">yCount</span>).value&gt;<span class="var type0" id="S11T0U764">beacon</span> <span class="comment">%i.e more than 1/4th of the region is white</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,91" id="srcline91"> 91</a></span><span class="line">         <span class="comment">%Check the regions its neighbours belong to</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,92" id="srcline92"> 92</a></span><span class="line">         <span class="var type0" id="S41T0U767">myLeftNeighRegion</span> =  <span class="var type0" id="S6T0U771">Map</span>(<span class="var type0" id="S38T0U772">xCount</span>, <span class="var type0" id="S39T0U773">yCount</span>).left.region; </span></span>
<span class="srcline"><span class="lineno"><a href="1,93" id="srcline93"> 93</a></span><span class="line">         <span class="var type0" id="S32T0U778">myRightNeighRegion</span> =  <span class="var type0" id="S6T0U782">Map</span>(<span class="var type0" id="S38T0U783">xCount</span>, <span class="var type0" id="S39T0U784">yCount</span>).right.region; </span></span>
<span class="srcline"><span class="lineno"><a href="1,94" id="srcline94"> 94</a></span><span class="line">         <span class="var type0" id="S33T0U789">myTopNeighRegion</span> =  <span class="var type0" id="S6T0U793">Map</span>(<span class="var type0" id="S38T0U794">xCount</span>, <span class="var type0" id="S39T0U795">yCount</span>).top.region; </span></span>
<span class="srcline"><span class="lineno"><a href="1,95" id="srcline95"> 95</a></span><span class="line">         <span class="var type0" id="S34T0U800">myBottomNeighRegion</span> =  <span class="var type0" id="S6T0U804">Map</span>(<span class="var type0" id="S38T0U805">xCount</span>, <span class="var type0" id="S39T0U806">yCount</span>).bottom.region;</span></span>
<span class="srcline"><span class="lineno"><a href="1,96" id="srcline96"> 96</a></span><span class="line">         </span></span>
<span class="srcline"><span class="lineno"><a href="1,97" id="srcline97"> 97</a></span><span class="line">         <span class="comment">%If any of its neighbours already belong to a region, select the region of the neigbour with the lowest value and force this one to join it</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,98" id="srcline98"> 98</a></span><span class="line">         <span class="keyword">if</span> <span class="var type0" id="S41T0U815">myLeftNeighRegion</span>&gt;0 || <span class="var type0" id="S32T0U818">myRightNeighRegion</span>&gt;0 || <span class="var type0" id="S33T0U821">myTopNeighRegion</span>&gt;0 || <span class="var type0" id="S34T0U824">myBottomNeighRegion</span>&gt;0 </span></span>
<span class="srcline"><span class="lineno"><a href="1,99" id="srcline99"> 99</a></span><span class="line">         <span class="var type0" id="S42T0U828">A</span> = [<span class="var type0" id="S41T0U831">myLeftNeighRegion</span> <span class="var type0" id="S32T0U832">myRightNeighRegion</span> <span class="var type0" id="S33T0U833">myTopNeighRegion</span> <span class="var type0" id="S32T0U834">myRightNeighRegion</span>];</span></span>
<span class="srcline"><span class="lineno"><a href="1,100" id="srcline100">100</a></span><span class="line">         <span class="var type0" id="S43T0U837">A1</span> = <span class="var type0" id="S42T0U839">A</span>(find(<span class="var type0" id="S42T0U843">A</span>~=-1)); <span class="comment">%-1 regions are black areas of the picture or regions that have not been attende to yet</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,101" id="srcline101">101</a></span><span class="line">         <span class="var type0" id="S45T0U848">oldestRegion</span> = min(<span class="var type0" id="S43T0U851">A1</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,102" id="srcline102">102</a></span><span class="line">         <span class="var type0" id="S6T0U856">Map</span>(<span class="var type0" id="S38T0U857">xCount</span>, <span class="var type0" id="S39T0U858">yCount</span>).region = <span class="var type0" id="S45T0U860">oldestRegion</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,103" id="srcline103">103</a></span><span class="line">         <span class="var type0" id="S5T0U864">regionSizeTracker</span>(1,<span class="var type0" id="S45T0U866">oldestRegion</span>) = <span class="var type0" id="S5T0U869">regionSizeTracker</span>(1,<span class="var type0" id="S45T0U871">oldestRegion</span>)+1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,104" id="srcline104">104</a></span><span class="line">         </span></span>
<span class="srcline"><span class="lineno"><a href="1,105" id="srcline105">105</a></span><span class="line">         <span class="comment">%Force other neigbours of this region that may be already part of another region to join the lower region</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,106" id="srcline106">106</a></span><span class="line">         <span class="keyword">if</span> <span class="var type0" id="S41T0U877">myLeftNeighRegion</span> &gt;0 &amp;&amp; <span class="var type0" id="S41T0U880">myLeftNeighRegion</span>~=<span class="var type0" id="S45T0U881">oldestRegion</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,107" id="srcline107">107</a></span><span class="line">             <span class="var type0" id="S5T0U885">regionSizeTracker</span>(1,<span class="var type0" id="S41T0U887">myLeftNeighRegion</span>) = <span class="var type0" id="S5T0U890">regionSizeTracker</span>(1,<span class="var type0" id="S41T0U892">myLeftNeighRegion</span>)-1; <span class="comment">%Update region Size tracker</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,108" id="srcline108">108</a></span><span class="line">             <span class="var type0" id="S6T0U899">Map</span>(<span class="var type0" id="S38T0U900">xCount</span>, <span class="var type0" id="S39T0U901">yCount</span>).left.region = <span class="var type0" id="S45T0U904">oldestRegion</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,109" id="srcline109">109</a></span><span class="line">             <span class="var type0" id="S5T0U908">regionSizeTracker</span>(1,<span class="var type0" id="S45T0U910">oldestRegion</span>) = <span class="var type0" id="S5T0U913">regionSizeTracker</span>(1,<span class="var type0" id="S45T0U915">oldestRegion</span>)+1; <span class="comment">%Update region Size tracker</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,110" id="srcline110">110</a></span><span class="line">         <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,111" id="srcline111">111</a></span><span class="line">         <span class="keyword">if</span> <span class="var type0" id="S32T0U921">myRightNeighRegion</span> &gt;0 &amp;&amp; <span class="var type0" id="S32T0U924">myRightNeighRegion</span>~=<span class="var type0" id="S45T0U925">oldestRegion</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,112" id="srcline112">112</a></span><span class="line">             <span class="var type0" id="S5T0U929">regionSizeTracker</span>(1,<span class="var type0" id="S32T0U931">myRightNeighRegion</span>) = <span class="var type0" id="S5T0U934">regionSizeTracker</span>(1,<span class="var type0" id="S32T0U936">myRightNeighRegion</span>)-1; <span class="comment">%Update region Size tracker</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,113" id="srcline113">113</a></span><span class="line">             <span class="var type0" id="S6T0U943">Map</span>(<span class="var type0" id="S38T0U944">xCount</span>, <span class="var type0" id="S39T0U945">yCount</span>).right.region = <span class="var type0" id="S45T0U948">oldestRegion</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,114" id="srcline114">114</a></span><span class="line">             <span class="var type0" id="S5T0U952">regionSizeTracker</span>(1,<span class="var type0" id="S45T0U954">oldestRegion</span>) = <span class="var type0" id="S5T0U957">regionSizeTracker</span>(1,<span class="var type0" id="S45T0U959">oldestRegion</span>)+1;  <span class="comment">%Update region Size tracker</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,115" id="srcline115">115</a></span><span class="line">         <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,116" id="srcline116">116</a></span><span class="line">         <span class="keyword">if</span> <span class="var type0" id="S33T0U965">myTopNeighRegion</span> &gt;0 &amp;&amp; <span class="var type0" id="S33T0U968">myTopNeighRegion</span>~=<span class="var type0" id="S45T0U969">oldestRegion</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,117" id="srcline117">117</a></span><span class="line">            <span class="var type0" id="S5T0U973">regionSizeTracker</span>(1,<span class="var type0" id="S33T0U975">myTopNeighRegion</span>) = <span class="var type0" id="S5T0U978">regionSizeTracker</span>(1,<span class="var type0" id="S33T0U980">myTopNeighRegion</span>)-1; <span class="comment">%Update region Size tracker</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,118" id="srcline118">118</a></span><span class="line">             <span class="var type0" id="S6T0U987">Map</span>(<span class="var type0" id="S38T0U988">xCount</span>, <span class="var type0" id="S39T0U989">yCount</span>).top.region = <span class="var type0" id="S45T0U992">oldestRegion</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,119" id="srcline119">119</a></span><span class="line">             <span class="var type0" id="S5T0U996">regionSizeTracker</span>(1,<span class="var type0" id="S45T0U998">oldestRegion</span>) = <span class="var type0" id="S5T0U1001">regionSizeTracker</span>(1,<span class="var type0" id="S45T0U1003">oldestRegion</span>)+1;  <span class="comment">%Update region Size tracker</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,120" id="srcline120">120</a></span><span class="line">         <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,121" id="srcline121">121</a></span><span class="line">         <span class="keyword">if</span> <span class="var type0" id="S34T0U1009">myBottomNeighRegion</span> &gt;0 &amp;&amp; <span class="var type0" id="S34T0U1012">myBottomNeighRegion</span>~=<span class="var type0" id="S45T0U1013">oldestRegion</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,122" id="srcline122">122</a></span><span class="line">             <span class="var type0" id="S5T0U1017">regionSizeTracker</span>(1,<span class="var type0" id="S34T0U1019">myBottomNeighRegion</span>) = <span class="var type0" id="S5T0U1022">regionSizeTracker</span>(1,<span class="var type0" id="S34T0U1024">myBottomNeighRegion</span>)-1; <span class="comment">%Update region Size tracker</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,123" id="srcline123">123</a></span><span class="line">             <span class="var type0" id="S6T0U1031">Map</span>(<span class="var type0" id="S38T0U1032">xCount</span>, <span class="var type0" id="S39T0U1033">yCount</span>).bottom.region = <span class="var type0" id="S45T0U1036">oldestRegion</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,124" id="srcline124">124</a></span><span class="line">             <span class="var type0" id="S5T0U1040">regionSizeTracker</span>(1,<span class="var type0" id="S45T0U1042">oldestRegion</span>) = <span class="var type0" id="S5T0U1045">regionSizeTracker</span>(1,<span class="var type0" id="S45T0U1047">oldestRegion</span>)+1;  <span class="comment">%Update region Size tracker</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,125" id="srcline125">125</a></span><span class="line">         <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,126" id="srcline126">126</a></span><span class="line">          </span></span>
<span class="srcline"><span class="lineno"><a href="1,127" id="srcline127">127</a></span><span class="line">         <span class="comment">%If non of its neigbour already belongs to a region, then assign it a region</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,128" id="srcline128">128</a></span><span class="line">         <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,129" id="srcline129">129</a></span><span class="line">         <span class="var type0" id="S6T0U1054">Map</span>(<span class="var type0" id="S38T0U1055">xCount</span>, <span class="var type0" id="S39T0U1056">yCount</span>).region = <span class="var type0" id="S35T0U1058">regionCounter</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,130" id="srcline130">130</a></span><span class="line">         <span class="var type0" id="S5T0U1062">regionSizeTracker</span>(1,<span class="var type0" id="S35T0U1064">regionCounter</span>) = <span class="var type0" id="S5T0U1067">regionSizeTracker</span>(1,<span class="var type0" id="S35T0U1069">regionCounter</span>)+1; </span></span>
<span class="srcline"><span class="lineno"><a href="1,131" id="srcline131">131</a></span><span class="line">         <span class="var type0" id="S35T0U1073">regionCounter</span> = <span class="var type0" id="S35T0U1075">regionCounter</span>+1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,132" id="srcline132">132</a></span><span class="line">         </span></span>
<span class="srcline"><span class="lineno"><a href="1,133" id="srcline133">133</a></span><span class="line">         <span class="keyword">end</span> <span class="comment">%End of 'if any of its neighbours already<span class="keyword">...</span><span class="comment">.'</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,134" id="srcline134">134</a></span><span class="line">       </span></span>
<span class="srcline"><span class="lineno"><a href="1,135" id="srcline135">135</a></span><span class="line">     <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,136" id="srcline136">136</a></span><span class="line">      <span class="comment">%Do nothing</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,137" id="srcline137">137</a></span><span class="line">     <span class="keyword">end</span> <span class="comment">%End of 'check to see if current region is bright enough<span class="keyword">...</span><span class="comment">..'</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,138" id="srcline138">138</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,139" id="srcline139">139</a></span><span class="line">     </span></span>
<span class="srcline"><span class="lineno"><a href="1,140" id="srcline140">140</a></span><span class="line">    <span class="comment">%Loop management </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,141" id="srcline141">141</a></span><span class="line">     <span class="keyword">if</span> <span class="var type0" id="S19T0U1081">yCounter</span>==<span class="var type0" id="S3T0U1082">yBlocks</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,142" id="srcline142">142</a></span><span class="line">        <span class="comment">%reset xStart, xStop positions and xCounter </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,143" id="srcline143">143</a></span><span class="line">         <span class="var type0" id="S15T0U1085">startY</span> = 1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,144" id="srcline144">144</a></span><span class="line">         <span class="var type0" id="S17T0U1089">stopY</span> = <span class="var type0" id="S12T0U1090">windowSize</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,145" id="srcline145">145</a></span><span class="line">         <span class="var type0" id="S19T0U1093">yCounter</span>=0;</span></span>
<span class="srcline"><span class="lineno"><a href="1,146" id="srcline146">146</a></span><span class="line">         <span class="var type0" id="S18T0U1097">xCounter</span> = <span class="var type0" id="S18T0U1099">xCounter</span>+1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,147" id="srcline147">147</a></span><span class="line">         </span></span>
<span class="srcline"><span class="lineno"><a href="1,148" id="srcline148">148</a></span><span class="line">         <span class="var type0" id="S14T0U1103">startX</span>=<span class="var type0" id="S14T0U1105">startX</span>+<span class="var type0" id="S10T0U1106">stepSize</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,149" id="srcline149">149</a></span><span class="line">         <span class="var type0" id="S16T0U1109">stopX</span>=<span class="var type0" id="S14T0U1112">startX</span>+<span class="var type0" id="S12T0U1113">windowSize</span>-1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,150" id="srcline150">150</a></span><span class="line">     <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,151" id="srcline151">151</a></span><span class="line">       <span class="var type0" id="S15T0U1118">startY</span> = <span class="var type0" id="S15T0U1120">startY</span>+<span class="var type0" id="S10T0U1121">stepSize</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,152" id="srcline152">152</a></span><span class="line">       <span class="var type0" id="S17T0U1124">stopY</span> = <span class="var type0" id="S15T0U1127">startY</span>+<span class="var type0" id="S12T0U1128">windowSize</span>-1; </span></span>
<span class="srcline"><span class="lineno"><a href="1,153" id="srcline153">153</a></span><span class="line">     <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,154" id="srcline154">154</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,155" id="srcline155">155</a></span><span class="line">     </span></span>
<span class="srcline"><span class="lineno"><a href="1,156" id="srcline156">156</a></span><span class="line">     <span class="var type0" id="S19T0U1132">yCounter</span>=<span class="var type0" id="S19T0U1134">yCounter</span>+1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,157" id="srcline157">157</a></span><span class="line"> <span class="keyword">end</span> <span class="comment">%end of xBlockLoop </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,158" id="srcline158">158</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,159" id="srcline159">159</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="1,160" id="srcline160">160</a></span><span class="line"><span class="keyword">end</span> <span class="comment">%end of function</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,161" id="srcline161">161</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,162" id="srcline162">162</a></span><span class="line">     </span></span>
</pre>
